<script>
  const RAW_JSON_URL = "https://raw.githubusercontent.com/Scholar-222/egg-data/main/egg.json";

  async function fetchTemperature() {
    const card = document.getElementById("tempCard");
    try {
      const resp = await fetch(RAW_JSON_URL + "?_=" + new Date().getTime());
      if (!resp.ok) throw new Error("Fetch failed: " + resp.status);
      const data = await resp.json();
      const temp = Number(data.temperature);

      card.textContent = temp + "Â°C";

      const small = document.createElement("span");
      small.className = "small";
      small.textContent = "updated: " + new Date().toLocaleTimeString();
      card.appendChild(small);

      if (temp > 80) {
        card.className = "card red";
      } else if (temp > 50) {
        card.className = "card yellow";
      } else {
        card.className = "card green";
      }
    } catch (err) {
      console.error(err);
      card.textContent = "Error";
      card.className = "card yellow";
      const small = document.createElement("span");
      small.className = "small";
      small.textContent = String(err).slice(0, 60);
      card.appendChild(small);
    }
  }

  fetchTemperature();
  setInterval(fetchTemperature, 5000);
</script>
